---
layout: post
title: "MP3_ID3V1"
date: 2011-10-13 23:32
comments: true
categories: knowledge
feature: /images/mainmenu/071.jpg
toc: true
---
### 双系统及酷狗用户,歌曲标签乱码,我是这样草草解决的 ###
	仅适用于win下酷狗软件下载的歌曲.形如artist - title.mp3
	1.foobar移除全部内嵌图像,歌词等.
	2.移除全部标签信息,本条针对日韩等.坦白说,我用不到这种信息唉.
	3.设置ID3V2.4写入标签版本.(默认utf-8)
	4.属性->工具->自动填充值	%artist% -%title% -
<!-- more -->	
{% img http://i1299.photobucket.com/albums/ag63/bearxuqian/CHANNE/photobucket/5_zpsf37048f6.png %}	
<font color=red>来自www:</font><br>
id3v1 采用 ISO-8859-1 编码，在理论上，它是无法正确存储中文歌名的.<br>
id3v2.3 除了可以使用 ISO-8859-1 编码外，也可以使用带 BOM 的 UTF-16.<br>
尽管如此，很多中文 mp3 还是用 GBK 编码（ISO-8859-1）写入 id3v2.3，<br>
所以会和 id3v1 一样有编码问题（mojibake）.<br>
对于这类 mp3 文件，大多数 Windows 的播放器在中文区域下都可以正确显示中文歌名,<br>
但是 Mac 和 Linux 下一般要进行 mp3 tag 编码转换，比如：EasyTAG，ID3Mod，nLyrics.<br>
有些 tag 编码转换程序只能写入 id3v2.4<br>
另外，针对 ISO-8859-1 编码的 tag，某些播放器会猜编码。歌名越长，猜中几率越高，但是一个字的歌名常常猜不对.<br>
id3v2.4 除了可以用 UTF-16 外，也可以使用了 UTF-8 编码.<br>
电脑上的播放器现在应该都支持 id3v2.4，<br>
但是某些播放器（特别是便携设备上的）由于 codebase 的关系，<br>
可能还在使用只支持到 id3v2.3 的 id3 库.<br>
这些播放器一般不会直接忽略掉 id3v2.4 的 tag，但是不能读取 UTF-8 编码的歌名.<br>
这样看来，为避免编码问题，最好的做法是：<br>
用 UTF-16 编码写入 id3v2.3，并且删掉 id3v1；<br>
假如 tag 转换程序只能写入 id3v2.4，应该使用带 BOM 的 UTF-16 编码（text encoding description byte = 0x01）.<br>
Windows 资源管理器和 Windows Media Player 对 id3v2 的 Unicode 编码支持很差<br>

如果同时存在二种标签,KUGOO默认使用ID3V2.3
	MP3头文件以ID3开头,则一般为ID3V2.3/4版本.
	char Header[3];			/*必须为"ID3"否则认为标签不存在*/
	char Ver;				/*版本号ID3V2.3就记录3*/
	char Revision;			/*副版本号此版本记录为0*/
	char Flag;				/*存放标志的字节，这个版本只定义三位,一般为0*/
	char Size[4];			/*标签大小，包括标签头的10个字节和所有的标签帧的大小,4字节各后7位组成新的28bit*/
	494433 03 00 00  00         04              1D          0C
	IDE     3  0  0  00000000   00000100        00011101    00001100--->10000111010001100
****************************************************************
	MP3尾部128字节(0x80)以TAG开头,则为ID3V1版本.
	名称				  位置				  长度				  内容
	Header				1-3					3                   标签头(TAG)
	Title				4-33				30                  标题
	Artist				34-63				30                  艺术家
	Album				64-93				30                  专辑
	Year				94-97				4                   出品年代
	Comment				98-127				30                  备注
	Cenre				128					1                   类型